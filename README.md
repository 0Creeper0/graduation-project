# graduation-project
毕设题目**基于STM32单片机的家庭智能安全系统**

## 各部分代码分布
- **code** 目录中为STM32的keil工程文件，C语言开发。
- **web** 目录中为云平台的源代码，前端Vue ([传送门](https://cn.vuejs.org/))+HTML为主，加上部分CSS，UI库使用Element-UI ([传送门](https://element.eleme.cn/2.0/#/zh-CN))，使用方式均为**CDN导入**的方式，后端使用PHP连接数据库，数据库为MySQL。
	- **web** 目录中 **iot.sql** 为数据库文件，数据库名称为 iot

## 本设计实现的功能

### 云平台
本设计实现了一个基本的云平台，可以实现设备显示及远程控制，设备绑定通过传感器id（s_id）作为唯一标识。

远程控制：前端点击开/关，后端更新数据库中sensors表的s_cmd字段，单片机请求esp_download.php页面，页面在数据库中进行查询，如果查到则返回 `{"s_id":"16","cmd":true}`类似的字符串，再由单片机解析字符串后进行相应操作

### 单片机
单片机部分实现数据采集，数据处理，数据显示，自动报警、数据上传及远程控制

数据采集：使用C语言驱动各传感器进行采集。

数据处理：需要处理的部分为esp8266接收的字符串、传感器采集到的数据与设定的阈值之间的关系等。

数据显示：实现数码管驱动及OLED屏幕驱动。

自动报警：通过比较传感器采集值及设定的阈值来判断是否报警。

数据上传：单片机通过esp8266发送GET请求，参数中包含s_id和s_data，请求esp_upload.php页面，通过页面接收请求后查询有此传感器后进行存储。

远程控制：见云平台部分。

